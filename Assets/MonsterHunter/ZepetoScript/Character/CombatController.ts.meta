fileFormatVersion: 2
guid: 15403791483254b748fa2562bfafa5f7
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst ZEPETO_Character_Controller_1
    = require(\\\"ZEPETO.Character.Controller\\\");\\r\\nconst UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst
    UnityEngine_UI_1 = require(\\\"UnityEngine.UI\\\");\\r\\nconst Entity_1 = require(\\\"../Base/Entity\\\");\\r\\nconst
    Sword_1 = require(\\\"../Equipment/Sword\\\");\\r\\nconst ZEPETO_Multiplay_1
    = require(\\\"ZEPETO.Multiplay\\\");\\r\\nconst TransformSyncHelper_1 = require(\\\"../../../Zepeto
    Multiplay Component/ZepetoScript/Transform/TransformSyncHelper\\\");\\r\\nconst
    MultiplayManager_1 = require(\\\"../../../Zepeto Multiplay Component/ZepetoScript/Common/MultiplayManager\\\");\\r\\nconst
    LeaderBoardManager_1 = require(\\\"../../../Zepeto LeaderBoard Module/ZepetoScript/LeaderBoardManager\\\");\\r\\nconst
    DataManager_1 = require(\\\"../Manager/DataManager\\\");\\r\\nclass CombatController
    extends Entity_1.default {\\r\\n    constructor(isMonster) {\\r\\n        super(false);\\r\\n       
    this._attackFlag = false;\\r\\n    }\\r\\n    Start() {\\r\\n        super.Start();\\r\\n       
    this.OnLocalCharacterLoaded();\\r\\n        this._localCharacter = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.LocalPlayer.zepetoPlayer.character;\\r\\n       
    this.animationClip = UnityEngine_1.Resources.Load(\\\"Slash1\\\");\\r\\n       
    this._room = MultiplayManager_1.default.instance.room;\\r\\n        const Id
    = this._room.SessionId;\\r\\n        this._room.AddMessageHandler(\\\"OnReward\\\"
    + Id, (reward) => {\\r\\n            LeaderBoardManager_1.default.instance.SendScore(1);\\r\\n           
    this.GetExpReward(reward.RewardExp);\\r\\n            this.GetCurrencyReward(reward.RewardCurrency);\\r\\n       
    });\\r\\n    }\\r\\n    Attack(target) {\\r\\n        //     console.log(`${this.name}
    attacks ${target.name}.`);\\r\\n        //     target.TakeDamage(10);\\r\\n   
    }\\r\\n    AttackMonster(coll) {\\r\\n        const data = new ZEPETO_Multiplay_1.RoomData();\\r\\n       
    data.Add(\\\"attacker\\\", this.GetComponent($typeof(TransformSyncHelper_1.default)).Id);\\r\\n       
    data.Add(\\\"victim\\\", coll.GetComponent($typeof(TransformSyncHelper_1.default)).Id);\\r\\n       
    data.Add(\\\"quantity\\\", this.attackPower);\\r\\n        this._room.Send(\\\"TakeDamage\\\",
    data.GetObject());\\r\\n    }\\r\\n    SetCharacterData(characterData) {\\r\\n       
    this.maxHp = characterData.get(DataManager_1.DataEnum.MaxHp);\\r\\n        this.hp
    = this.maxHp;\\r\\n        this.attackPower = characterData.get(DataManager_1.DataEnum.AD);\\r\\n       
    this.skillPower = 100;\\r\\n        //\uC11C\uBC84 \uB3D9\uAE30\uD654\\r\\n       
    this.SetEntity();\\r\\n    }\\r\\n    GetExpReward(quantity) {\\r\\n        this._room.Send(\\\"GainExp\\\",
    quantity);\\r\\n    }\\r\\n    GetCurrencyReward(quantity) {\\r\\n        const
    data = new ZEPETO_Multiplay_1.RoomData();\\r\\n        data.Add(\\\"currencyId\\\",
    \\\"energy\\\");\\r\\n        data.Add(\\\"quantity\\\", quantity);\\r\\n       
    this._room.Send(\\\"onCredit\\\", data.GetObject());\\r\\n    }\\r\\n    OnLocalCharacterLoaded()
    {\\r\\n        this._attackBtn = UnityEngine_1.GameObject.Find(\\\"AttackBtn\\\").GetComponent($typeof(UnityEngine_UI_1.Button));\\r\\n       
    this._attackBtn.onClick.AddListener(() => {\\r\\n            this.StartCoroutine(this.DoCharacterAttack());\\r\\n       
    });\\r\\n    }\\r\\n    *DoCharacterAttack() {\\r\\n        if (!this._localSword)
    {\\r\\n            const sword = this._localCharacter.GetComponentInChildren($typeof(Sword_1.default)).gameObject;\\r\\n           
    this._localSword = sword.GetComponent($typeof(UnityEngine_1.Collider));\\r\\n       
    }\\r\\n        if (!this._attackFlag) {\\r\\n            this._attackFlag = true;\\r\\n           
    this._localCharacter.SetGesture(this.animationClip);\\r\\n            this._localSword.enabled
    = true;\\r\\n            yield new UnityEngine_1.WaitForSeconds(this.animationClip.length);\\r\\n           
    this._localSword.enabled = false;\\r\\n            this._attackFlag = false;\\r\\n       
    }\\r\\n    }\\r\\n}\\r\\nexports.default = CombatController;\\r\\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tYmF0Q29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkNvbWJhdENvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSw2RUFBMkU7QUFDM0UsNkNBQTJGO0FBQzNGLG1EQUFzQztBQUN0QywyQ0FBb0M7QUFDcEMsOENBQXVDO0FBQ3ZDLHVEQUFnRDtBQUNoRCx3SEFBaUg7QUFDakgsK0dBQXdHO0FBQ3hHLDJHQUFvRztBQUNwRyx3REFBZ0Q7QUFFaEQsTUFBcUIsZ0JBQWlCLFNBQVEsZ0JBQU07SUFRaEQsWUFBWSxTQUFpQjtRQUN6QixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFMVCxnQkFBVyxHQUFhLEtBQUssQ0FBQztJQU10QyxDQUFDO0lBRU0sS0FBSztRQUNSLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNkLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxlQUFlLEdBQUcsMkNBQWEsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUM7UUFDakYsSUFBSSxDQUFDLGFBQWEsR0FBRyx1QkFBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQWtCLENBQUM7UUFFL0QsSUFBSSxDQUFDLEtBQUssR0FBRywwQkFBZ0IsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1FBQzVDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsVUFBVSxHQUFDLEVBQUUsRUFBRSxDQUFDLE1BQW1CLEVBQUUsRUFBRTtZQUNoRSw0QkFBa0IsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENB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\",\"assetPath\":\"Assets/MonsterHunter/ZepetoScript/Character/CombatController.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"UnityEngine.AnimationModule\",\"name\":\"animationClip\",\"type\":\"UnityEngine.AnimationClip\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"mscorlib\",\"name\":\"maxHp\",\"type\":\"System.Single\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"mscorlib\",\"name\":\"hp\",\"type\":\"System.Single\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"mscorlib\",\"name\":\"attackPower\",\"type\":\"System.Single\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"mscorlib\",\"name\":\"skillPower\",\"type\":\"System.Single\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"UnityEngine.AnimationModule\",\"name\":\"animator\",\"type\":\"UnityEngine.Animator\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]}],\"name\":\"CombatController\",\"description\":\"\",\"hasAnimatorMove\":false},\"isCompiled\":true}"
  typescriptHash: f29e1a78603c419bcfc28965e00b657e
  onlyWriteTrigger: 0
